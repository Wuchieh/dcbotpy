import discord
from discord.ext import commands
from core.classes import Cog_Extension
import os
import json
import random
with open('setting.json','r',encoding='utf8') as jset:
    jdata = json.load(jset)


class lottery(Cog_Extension):
    @commands.command()
    async def lottery(self,ctx):
        await ctx.message.delete()
        if str(ctx.author.id) == jdata['owner']:
            embed=discord.Embed(title="抽獎", color=0xf54242)
            embed.add_field(name="一月抽獎活動", value="獎品 ： discord classic 一個月", inline=False)
            embed.set_footer(text="點擊下方圖標參加")
            msg = await ctx.send(embed=embed)
            await msg.add_reaction('💰')
    

    @commands.command()
    async def lotend(self,ctx):
        if str(ctx.author.id) == jdata['owner']:
            member = [773833615565520917,767311898357792768,764422642354094091,763238103687102494,761846089816866816,753947744523255876,751705508594974771,751110869450227712,738332525176422513,710849784918966313,673480715756765189,669132676674093066,667984215282941962,656761631224758282,644479912824143883,631823065067552769,611268093389570068,581794418764415020,416213146408189952,225605610022895616,631823065067552769,667984215282941962,457924239627124736,588725576634728459,587249962446880770,581834882368667648,581794418764415020,575674239886032896,569466716111896586,558631972637900810,558628746253303818,553533519389786134,544842488003821573,529575442567659520,528551316742471680,528227414678044672,508994841632440332,498376778931503114,494841526384328705,490756261747621897,490201803661508630,484358548348862473,479236513104789517,472660756077477890,468756020068352015,465566938186383370,463146467499048961,462698977331249172,462698578675236914,462531541021753354,457924239627124736,446629524939997184,436866339731275787,434649066283204628,416213146408189952,401247773778903043,394055506899107843,387929753598033920,379221224275836938,369127539559628801,331820498511986688,279589449518546945,234268955970109441,225605610022895616]
            winer = random.choice(member)
            user = self.bot.get_user(winer)
            print(user)
            overmsg = '@everyone \n 恭喜{}中獎'.format(user.mention)
            await ctx.send(overmsg)
            await ctx.message.delete()


def setup(bot):
    bot.add_cog(lottery(bot))